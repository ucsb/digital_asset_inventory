/**
 * @file
 * Digital Asset Inventory - Public Styles
 *
 * Public-facing styles for archive registry, detail pages, and banner.
 * All styles use either:
 *   - .dai--public wrapper (for view-based pages)
 *   - .dai- prefixed component classes (for standalone components)
 *
 * Colors use CSS variables from dai-base.css for theme overridability.
 */

/* ===== Public Archive Registry ===== */

/* Container styling */
.dai--public {
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding-bottom: 3em;
}

/* Hide filters when view is empty (progressive enhancement) */
.dai--public:has(.view-empty) .views-exposed-form {
  display: none;
}

/* ===== Archive Registry Intro Box ===== */
.dai--public .dai-archive-registry-intro {
  margin-bottom: 2rem;
  padding: 1.5em;
  background-color: var(--dai-surface-bg);
  border: 1px solid var(--dai-surface-border);
  border-radius: var(--dai-surface-radius);
  color: var(--dai-text-primary);
}

.dai--public .dai-archive-registry-intro h2,
.dai--public .dai-archive-registry-intro h2:first-child {
  margin-top: 0;
  margin-bottom: 0.5em;
  color: var(--dai-text-primary);
}

.dai--public .dai-archive-registry-intro p {
  margin: 1rem 0;
  line-height: 1.6;
  color: var(--dai-text-primary);
}

.dai--public .dai-archive-registry-intro p:first-child {
  margin-top: 0;
}

.dai--public .dai-archive-registry-intro p:last-child {
  margin-bottom: 0;
}

/* Archive Registry Intro Links */
.dai--public .dai-archive-registry-intro a:link,
.dai--public .dai-archive-registry-intro a:visited {
  color: var(--dai-link);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

.dai--public .dai-archive-registry-intro a:hover,
.dai--public .dai-archive-registry-intro a:focus {
  color: var(--dai-link-hover);
  text-decoration: underline;
  text-decoration-thickness: 2px;
  border-bottom: none;
  box-shadow: none;
}

/* ===== Public Archive Table Styles ===== */
/* Matches .dai-archive-detail-table styling exactly for consistency */

/* Table structure - base styles (all viewports) */
/* Reset only view-content (not the parent view) to avoid affecting breadcrumbs/title */
/* !important needed to override theme grid layouts (Olivero, etc.) */
.dai--public .view-content {
  display: block !important;
  overflow-x: visible;
  margin-top: 0 !important;
  padding-top: 0 !important;
  gap: 0 !important;
}

/* Reset table margins for consistent spacing */
.dai--public .view-content > table {
  margin-top: 0.25rem !important;
}

/* Empty state area - same spacing as table */
.dai--public .view-empty {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Desktop table styling (1024px and above) */
@media (min-width: 1024px) {
  .dai--public table,
  .dai--public table.views-table,
  .dai--public table.tablesaw {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
  }

  /* Cell styling - matches .dai-archive-detail-table exactly */
  /* !important needed for theme-agnostic consistency */
  .dai--public table th,
  .dai--public table td {
    padding: 0.75rem !important;
    text-align: left;
    border: 1px solid var(--dai-surface-border) !important;
    overflow-wrap: anywhere;
    word-wrap: break-word;
  }

  /* Header styling */
  .dai--public table th {
    background-color: var(--dai-surface-bg);
    color: var(--dai-text-primary);
    font-weight: 700;
  }

  /* Body cell styling */
  .dai--public table td {
    background-color: var(--dai-surface-bg-alt);
    color: var(--dai-text-primary);
  }
}

/* Truncate long file names on desktop only */
@media (min-width: 1024px) {
  .dai--public td.views-field-name {
    max-width: 280px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

/* ===== Public Archive Links ===== */

/* General links */
.dai--public a:link,
.dai--public a:visited {
  color: var(--dai-link);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

.dai--public a:hover,
.dai--public a:focus {
  color: var(--dai-link-hover);
  text-decoration: underline;
  text-decoration-thickness: 2px;
  border-bottom: none;
  box-shadow: none;
}

/* Sortable table header links - no underline */
.dai--public th a:link,
.dai--public th a:visited,
.dai--public thead a:link,
.dai--public thead a:visited {
  color: var(--dai-text-primary);
  text-decoration: none;
  border-bottom: none;
  box-shadow: none;
}

.dai--public th a:hover,
.dai--public th a:focus,
.dai--public thead a:hover,
.dai--public thead a:focus {
  color: var(--dai-text-primary);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

/* Table cell links - single underline only */
.dai--public td a:link,
.dai--public td a:visited,
.dai--public tbody a:link,
.dai--public tbody a:visited {
  color: var(--dai-link);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

.dai--public td a:hover,
.dai--public td a:focus,
.dai--public tbody a:hover,
.dai--public tbody a:focus {
  color: var(--dai-link-hover);
  text-decoration: underline;
  text-decoration-thickness: 2px;
  border-bottom: none;
  box-shadow: none;
}

/* ===== CSS-Only Responsive Stacked Mode (Card Layout) ===== */
/* Matches .dai-archive-detail-table stacked mode exactly */
/* Uses data-label attributes injected by per-view Twig templates */
@media (max-width: 1023px) {
  .dai--public .view-content {
    overflow-x: hidden;
  }

  .dai--public table.dai-stack-table {
    border: 0 !important;
  }

  /* Hide table header - labels shown per cell via data-label */
  .dai--public table.dai-stack-table thead {
    display: none !important;
  }

  /* Each row becomes a card - matches detail table exactly */
  .dai--public table.dai-stack-table tbody tr {
    display: block !important;
    border: 1px solid var(--dai-surface-border) !important;
    border-radius: var(--dai-surface-radius);
    margin-bottom: 1rem;
    padding: 0;
    background-color: var(--dai-surface-bg-alt);
  }

  /* Each cell becomes a block - matches detail table exactly */
  .dai--public table.dai-stack-table td {
    display: block !important;
    width: 100% !important;
    box-sizing: border-box;
    padding: 0.75rem !important;
    border: none !important;
    border-bottom: 1px solid var(--dai-surface-border) !important;
    text-align: left;
    float: none !important;
    position: static !important;
    height: auto !important;
  }

  .dai--public table.dai-stack-table td:last-child {
    border-bottom: none !important;
  }

  /* Show labels from data-label attribute */
  .dai--public table.dai-stack-table td::before {
    content: attr(data-label);
    display: block;
    font-weight: 700;
    margin-bottom: 0.25rem;
    color: var(--dai-text-primary);
  }

  /* Hide empty labels */
  .dai--public table.dai-stack-table td[data-label=""]::before {
    display: none;
  }

  /* Tablesaw coexistence: If Tablesaw is also present, hide our ::before labels */
  .dai--public table.dai-stack-table td:has(.tablesaw-cell-label)::before {
    display: none !important;
  }

  /* Style Tablesaw elements when present (fallback for sites with responsive_tables_filter) */
  .dai--public table.dai-stack-table .tablesaw-cell-label,
  .dai--public table.dai-stack-table .tablesaw-cell-content {
    float: none !important;
    width: 100% !important;
    display: block !important;
    position: static !important;
  }

  .dai--public table.dai-stack-table .tablesaw-cell-label {
    font-weight: 700;
    margin-bottom: 0.25rem;
  }

  /* Text wrapping for long content */
  .dai--public table.dai-stack-table td,
  .dai--public table.dai-stack-table a {
    word-break: break-word;
    overflow-wrap: anywhere;
  }
}

/* ===== Archive Empty State ===== */
.dai--public .dai-archive-empty {
  padding: 2rem;
  text-align: center;
  background-color: var(--dai-surface-bg);
  border: 1px solid var(--dai-surface-border);
  border-radius: var(--dai-surface-radius);
  margin: 1rem 0;
}

.dai--public .dai-archive-empty p {
  margin: 0;
  font-size: 1.1rem;
  color: var(--dai-text-muted);
}

/* ===== Archive Type Badges (Public Registry) ===== */
/* Subtle badges to distinguish Legacy (pre-deadline) vs General (post-deadline) archives */
.dai-archive-type-badge {
  display: inline-block;
  padding: 0.25em 0.75em;
  border-radius: 3px;
  font-size: 0.85em;
  font-weight: 500;
  white-space: nowrap;
  border: none;
  box-shadow: none;
  text-decoration: none;
}

/* Legacy Archive - archived before ADA deadline (April 24, 2026) */
/* Light blue background with blue text */
.dai-archive-type-badge--legacy {
  background-color: var(--dai-badge-legacy-bg);
  color: var(--dai-badge-legacy-text);
}

/* General Archive - archived after ADA deadline */
/* Neutral gray background with dark gray text */
.dai-archive-type-badge--general {
  background-color: var(--dai-badge-general-bg);
  color: var(--dai-badge-general-text);
}

/* ===== Archive Detail Page ===== */

/* Container - page title alignment is theme-controlled (rendered outside this container).
 * Themes can match title width: .page-title { max-width: 1200px; margin: 0 auto; }
 */
.dai--archive-detail {
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  padding-bottom: 3em;
  color: var(--dai-text-primary);
}

.dai--archive-detail h3 {
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  color: var(--dai-text-primary);
}

.dai--archive-detail p {
  margin: 0.75em 0;
  line-height: 1.5;
  color: var(--dai-text-primary);
}

/* Archive Detail Links */
.dai--archive-detail a:link,
.dai--archive-detail a:visited {
  color: var(--dai-link);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

.dai--archive-detail a:hover,
.dai--archive-detail a:focus {
  color: var(--dai-link-hover);
  text-decoration: underline;
  text-decoration-thickness: 2px;
  border-bottom: none;
  box-shadow: none;
}

/* ===== Login Required Notice ===== */
/* Styled as a notice (not an error) - authentication is an expected access state */
.dai-archive-login-required {
  margin-bottom: 1em;
  padding: 0.75em 1em 1em 1em;
  background-color: var(--dai-notes-bg);
  border: 1px solid var(--dai-notes-border);
  border-left: 4px solid var(--dai-accent-info);
  border-radius: var(--dai-surface-radius);
  color: var(--dai-text-primary);
}

.dai-archive-login-required__title {
  font-size: 1.1em;
}

.dai-archive-login-required p {
  margin: 0 0 0.5em 0;
  color: var(--dai-text-primary);
}

.dai-archive-login-required p:last-child {
  margin-bottom: 0;
}

/* Login link - styled as a prominent link, not a button */
/* Uses darker color for 7:1 contrast against notes-bg (#fff3cd) */
/* Higher specificity needed to override .dai--archive-detail a:link */
.dai-archive-login-required a.dai-archive-login-link,
.dai-archive-login-required a.dai-archive-login-link:link,
.dai-archive-login-required a.dai-archive-login-link:visited {
  font-weight: 600;
  color: var(--dai-link-on-notice);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

.dai-archive-login-required a.dai-archive-login-link:hover,
.dai-archive-login-required a.dai-archive-login-link:focus {
  color: var(--dai-link-on-notice-hover);
  text-decoration: underline;
  text-decoration-thickness: 2px;
  border-bottom: none;
  box-shadow: none;
}

/* ===== Archive Notice Box ===== */
.dai-archive-notice {
  margin-top: 0;
  margin-bottom: 1.5em;
  padding: 1.5em;
  background-color: var(--dai-surface-bg);
  border: 1px solid var(--dai-surface-border);
  border-radius: var(--dai-surface-radius);
  color: var(--dai-text-primary);
}

.dai-archive-notice h2 {
  margin-top: 0;
  margin-bottom: 0.5em;
  color: var(--dai-text-primary);
}

.dai-archive-notice p {
  margin: 0.75em 0;
  line-height: 1.5;
  color: var(--dai-text-primary);
}

.dai-archive-notice p:last-of-type {
  margin-bottom: 0;
}

/* Copy link button container within notice */
.dai-archive-notice .dai-archive-copy-link {
  margin-top: 1em;
}

/* ===== Admin-Only Access Notice (Anonymous Users) ===== */
/* Shown when anonymous users visit an admin-only archive detail page.
 * "Admin-only controls visibility & disclosure, not storage."
 * We don't show the file URL; we show a contact message. */
.dai-archive-access-notice {
  margin-top: 0;
  margin-bottom: 1.5em;
  padding: 1.5em;
  background-color: var(--dai-surface-bg);
  border: 1px solid var(--dai-surface-border);
  border-left: 4px solid var(--dai-badge-warning-bg, #b8860b);
  border-radius: var(--dai-surface-radius);
  color: var(--dai-text-primary);
}

.dai-archive-access-notice h2 {
  margin-top: 0;
  margin-bottom: 0.5em;
  color: var(--dai-text-primary);
}

.dai-archive-access-notice p {
  margin: 0.75em 0;
  line-height: 1.5;
  color: var(--dai-text-primary);
}

.dai-archive-access-notice p:first-of-type {
  margin-top: 0;
}

.dai-archive-access-notice p:last-of-type {
  margin-bottom: 0;
}

/* ===== Admin Notice (Admins Viewing Admin-Only) ===== */
/* Info banner shown to admins when viewing an admin-only archive. */
.dai-archive-admin-notice {
  margin-top: 0;
  margin-bottom: 1.5em;
  padding: 1em 1.5em;
  background-color: var(--dai-badge-info-bg, #e8f2fd);
  border: 1px solid var(--dai-badge-info-border, #b3d4fc);
  border-radius: var(--dai-surface-radius);
  color: var(--dai-text-primary);
}

.dai-archive-admin-notice p {
  margin: 0;
  line-height: 1.5;
}

/* Integrity note */
.dai-archive-integrity-note {
  margin-top: 1em;
  color: var(--dai-text-primary);
}

/* Back link */
.dai-archive-back-link {
  margin-top: 2em;
}

/* Touch target: 44px minimum for WCAG 2.5.5 AAA */
.dai-archive-back-link a {
  display: inline-block;
  min-height: 44px;
  line-height: 44px;
}

.dai-archive-back-link a:link,
.dai-archive-back-link a:visited {
  color: var(--dai-link);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

.dai-archive-back-link a:hover,
.dai-archive-back-link a:focus {
  color: var(--dai-link-hover);
  text-decoration: underline;
  text-decoration-thickness: 2px;
  border-bottom: none;
  box-shadow: none;
}

/* ===== Archive Detail Table ===== */
.dai-archive-detail-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
}

.dai-archive-detail-table th,
.dai-archive-detail-table td {
  padding: 0.75rem;
  text-align: left;
  border: 1px solid var(--dai-surface-border);
  overflow-wrap: anywhere;
  word-wrap: break-word;
}

.dai-archive-detail-table th {
  background-color: var(--dai-surface-bg);
  color: var(--dai-text-primary);
  font-weight: 700;
}

.dai-archive-detail-table td {
  background-color: var(--dai-surface-bg-alt);
  color: var(--dai-text-primary);
}

/* Table links */
.dai-archive-detail-table a:link,
.dai-archive-detail-table a:visited {
  color: var(--dai-link);
  text-decoration: underline;
  border-bottom: none;
  box-shadow: none;
}

.dai-archive-detail-table a:hover,
.dai-archive-detail-table a:focus {
  color: var(--dai-link-hover);
  text-decoration: underline;
  text-decoration-thickness: 2px;
  border-bottom: none;
  box-shadow: none;
}

/* Archive Detail Table - Responsive Stacked Mode */
/* Supports mobile viewports and WCAG 1.4.10 reflow at 400% zoom */
@media (max-width: 1023px) {
  .dai-archive-detail-table {
    border: 0;
  }

  /* Hide table header - labels shown per cell via data-label */
  .dai-archive-detail-table thead {
    display: none;
  }

  /* Each row becomes a card */
  .dai-archive-detail-table tbody tr {
    display: block;
    border: 1px solid var(--dai-surface-border);
    border-radius: var(--dai-surface-radius);
    margin-bottom: 1rem;
    padding: 0;
    background-color: var(--dai-surface-bg-alt);
  }

  /* Each cell becomes a block with label */
  .dai-archive-detail-table td {
    display: block;
    width: 100%;
    box-sizing: border-box;
    padding: 0.75rem;
    border: none;
    border-bottom: 1px solid var(--dai-surface-border);
    text-align: left;
  }

  .dai-archive-detail-table td:last-child {
    border-bottom: none;
  }

  /* Show label from data-label attribute */
  .dai-archive-detail-table td::before {
    content: attr(data-label);
    display: block;
    font-weight: 700;
    margin-bottom: 0.25rem;
    color: var(--dai-text-primary);
  }
}

/* ===== Copy Link Button ===== */
.dai-archive-copy-link__button,
button.dai-archive-copy-link__button,
button.dai-archive-copy-link__button[type="button"] {
  display: inline-block;
  min-height: 44px;
  padding: 0.625rem 1.25rem;
  background-color: var(--dai-accent-info);
  color: var(--dai-btn-primary-text);
  border: 2px solid var(--dai-accent-info);
  border-radius: var(--dai-surface-radius);
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  line-height: 1.5;
  box-shadow: none;
  text-shadow: none;
}

.dai-archive-copy-link__button:hover,
.dai-archive-copy-link__button:focus,
button.dai-archive-copy-link__button:hover,
button.dai-archive-copy-link__button:focus,
button.dai-archive-copy-link__button[type="button"]:hover,
button.dai-archive-copy-link__button[type="button"]:focus {
  background-color: var(--dai-accent-info-hover);
  border-color: var(--dai-accent-info-hover);
  color: var(--dai-btn-primary-text);
  text-decoration: none;
  outline: 2px solid var(--dai-accent-info-hover);
  outline-offset: 2px;
}

.dai-archive-copy-link__confirmation {
  margin-left: 0.5rem;
  color: var(--dai-text-success);
  font-weight: 600;
}

/* ===== Archived Content Banner ===== */
/* Banner displayed on archived content pages (uses base library, works in any context) */
/* Left accent rail makes it recognizable as a system notice */
/* No max-width: inherits from theme's content container. Themes can add:
 *   .dai-archived-content-banner { max-width: 800px; margin-left: auto; margin-right: auto; }
 */
.dai-archived-content-banner {
  background-color: var(--dai-surface-bg);
  border: 1px solid var(--dai-surface-border);
  border-left: 4px solid var(--dai-accent-info);
  border-radius: var(--dai-surface-radius);
  padding: 1rem;
  margin-bottom: 1.5rem;
  color: var(--dai-text-primary);
}

.dai-archived-content-banner h2 {
  margin: 0 0 0.75rem 0;
  font-weight: 700;
  color: var(--dai-text-primary);
}

.dai-archived-content-banner p {
  margin: 0.5rem 0;
  line-height: 1.5;
  color: var(--dai-text-primary);
}

.dai-archived-content-banner p:last-child {
  margin-bottom: 0;
}

/* ===== Archived Media Placeholder ===== */
/* Replaces embedded videos/documents that have been archived */
.dai-archived-media-placeholder {
  background-color: var(--dai-surface-bg);
  border: 1px solid var(--dai-surface-border);
  border-left: 4px solid var(--dai-accent-info);
  border-radius: var(--dai-surface-radius);
  padding: 1rem 1.25rem;
  margin: 1rem 0;
}

/* Header with icon and title */
.dai-archived-media-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid var(--dai-surface-border);
}

.dai-archived-media-icon {
  flex-shrink: 0;
  color: var(--dai-accent-info);
}

.dai-archived-media-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--dai-text-primary);
  text-decoration: none;
}

.dai-archived-media-title:hover,
.dai-archived-media-title:focus {
  text-decoration: underline;
  color: var(--dai-accent-info);
}

/* ===== Inline Archived Link ===== */
/* Used when archived content is linked in public content */
/* Shows as: "Document Name (Archived)" with link to detail page */
/* Link colors and label styling inherited from theme */

/* Body with notice and accessibility message */
.dai-archived-media-body {
  color: var(--dai-text-primary);
}

.dai-archived-media-notice {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  margin: 0 0 0.5rem 0;
  line-height: 1.5;
}

.dai-archived-info-icon {
  flex-shrink: 0;
  color: var(--dai-accent-info);
  margin-top: 0.15rem;
}

.dai-archived-media-accessibility {
  margin: 0;
  font-size: 0.9rem;
  color: var(--dai-text-secondary, #666);
  line-height: 1.5;
}
